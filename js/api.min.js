"use strict";var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ping=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"queryOne",value:function(e){return document.querySelector(e)}},{key:"query",value:function(e){return[].slice.apply(document.querySelectorAll(e))}},{key:"addClass",value:function(e,t){return e.classList?e.classList.add(t):e.className+=" "+t,this}},{key:"removeClass",value:function(e,t){return e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "),this}},{key:"hasClass",value:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}},{key:"getParseUrl",value:function(){var e=document.location.search;if(-1<e.indexOf("=")){var t=e.substring(1).split("&"),n={};return t.forEach(function(e){var t=e.split("=");n[t[0]]=t[1]}),n}return{}}},{key:"debounce",value:function(t,n){var a=arguments,r=this,o=void 0;return function(){var e=a;clearTimeout(o),o=setTimeout(function(){n.apply(r,e)},t)}}}]),e}();!function(n){function a(e){var t;(t=localStorage.getItem("lang"))&&n.query(".lang-"+t).forEach(function(e){n.addClass(e,"code-hidden")}),localStorage.setItem("lang",e),n.query(".lang-"+e).forEach(function(e){n.removeClass(e,"code-hidden")})}document.addEventListener("DOMContentLoaded",function(){var e=n.getParseUrl().lang||localStorage.getItem("lang");e=""===e||null==e?"curl":e.toLowerCase(),n.query("#lang a").forEach(function(e){n.removeClass(e,"active")}),n.query("#lang a[data="+e+"]").forEach(function(e){n.addClass(e,"active")}),a(e),-1<document.referrer.indexOf(document.location.host)&&(n.queryOne("#menu").scrollTop=sessionStorage.getItem("scroll-menu")),n.queryOne("#lang").addEventListener("click",function(e){return e.stopPropagation(),"A"===e.target.tagName&&(!n.hasClass(e.target,"active")&&(a(e.target.getAttribute("data")),n.query("#lang a").forEach(function(e){n.removeClass(e,"active")}),void n.addClass(e.target,"active")))}),n.query(".sidebar details dt").forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation();var t,n=e.target.parentNode.parentNode,a=e.target.textContent,r=[].slice.apply(n.querySelectorAll("dd a")),o=(t=a,r.some(function(e){if(e.textContent===t+"概述")return!0})?t+"概述":""),s=-1<decodeURIComponent(window.location.pathname).indexOf(o);null===n.getAttribute("open")&&o&&!s&&(window.location.href=o+".html")})});var t=n.debounce(100,function(){sessionStorage.setItem("scroll-menu",n.queryOne("#menu").scrollTop)});n.queryOne("#menu").addEventListener("scroll",function(){t()})})}(new Ping);